<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      :root {
        --bg: #0e0f12;
        --panel: #1a1c20;
        --text: #eee;
        --accent: #6d5dfc;
      }

      body {
        margin: 0;
        background: var(--bg);
        color: var(--text);
        font-family: Arial, Helvetica, sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 2rem;
        gap: 2rem;
      }

      h1 {
        font-size: 2rem;
        color: var(--accent);
        margin: 0;
        user-select: none;
      }
      .controls {
        background: var(--panel);
        padding: 1.2rem 2rem;
        border-radius: 12px;
        display: flex;
        align-items: center;
        gap: 1rem;
        flex-wrap: wrap;
        box-shadow: 0 0 20px #0004;
      }
      input {
        padding: 0.5rem 0.7rem;
        border-radius: 8px;
        border: none;
        outline: none;
        font-size: 1rem;
      }
      button {
        background: var(--accent);
        padding: 0.7rem 1.4rem;
        font-size: 1rem;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        color: #fff;
        transition: 0.2s;
      }
      button:hover {
        opacity: 0.8;
        transform: translateY(-2px);
      }

      #grid {
        display: flex;
        flex-wrap: wrap;
        width: min(90vw, 700px);
        aspect-ratio: 1/1;
        border: 2px solid #444;
        border-radius: 12px;
        overflow: hidden;
        background: #111;
      }
      .cell {
        flex: 0 0 auto;
        background: #1c1c1c;
        border: 1px solid #000;
      }
    </style>
  </head>
  <body>
    <h1>Dynamic flex-grid sketch</h1>
    <div class="controls">
      <label>Cells:</label>
      <input type="number" min="1" placeholder="e.g 2000" id="cellCount" />
      <button id="gereateBtn">Generate</button>
      <button id="resetBtn">Reset</button>
    </div>
    <div id="grid"></div>
    <script>
      const grid = document.getElementById("grid");
      const cellCountInput = document.getElementById("cellCount");
      const getBtn = document.getElementById("generateBtn");
      const resetBtn = document.getElementById("resetBtn");

      function randomColor() {
        return `hsl(${Math.random * 360} , 80%,60%)`;
      }

      function generateGrid(n) {
        grid.innerHTML = "";

        const cellSize = Math.sqrt((grid.clientWidth * grid.clientWidth) / n);

        for (let i = 0; i < n; i++) {
          const cell = document.createElement("div");
          cell.className = "cell";
          cell.style.width = cellSize + "px";
          cell.style.height = cellSize + "px";

          cell.addEventListener("mouseover", () => {
            cell.style.background = randomColor();
          });
          grid.appendChild(cell);
        }
      }

      getBtn.onclick = () => {
        const n = Number(cellCountInput.value);
        generateGrid(n);
      };

      resetBtn.onclick = () => {
        document
          .querySelectorAll(".cell")
          .forEach((c) => (c.style.background = "#1c1c1c"));
      };
    </script>
  </body>
</html>
